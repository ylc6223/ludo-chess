# å››å›½å†›æ£‹å¯¹æˆ˜åŠŸèƒ½æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†ä¸ºå››å›½å†›æ£‹æ£‹ç›˜å¯è§†åŒ–é¡¹ç›®æ·»åŠ ç©å®¶å¯¹æˆ˜åŠŸèƒ½çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆã€‚è¯¥åŠŸèƒ½å°†å®ç°ä¸€äººå¯¹æŠ—ä¸‰ä¸ªAIç”µè„‘çš„å¯¹æˆ˜æ¨¡å¼ï¼ŒåŒ…æ‹¬å®Œæ•´çš„æ¸¸æˆè§„åˆ™å¼•æ“ã€æ™ºèƒ½AIå¯¹æ‰‹ã€ç”¨æˆ·äº¤äº’ä¼˜åŒ–ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

**ç›®æ ‡**: å°†ç°æœ‰çš„é™æ€æ£‹ç›˜å¯è§†åŒ–é¡¹ç›®å‡çº§ä¸ºå®Œæ•´çš„å››å›½å†›æ£‹æ¸¸æˆ

**æ ¸å¿ƒç‰¹æ€§**:
- 1äººç©å®¶ vs 3ä¸ªAIå¯¹æ‰‹
- å®Œæ•´çš„å››å›½å†›æ£‹è§„åˆ™å®ç°
- å¤šéš¾åº¦AIç³»ç»Ÿ
- æµç•…çš„ç”¨æˆ·ä½“éªŒ
- æ•°æ®æŒä¹…åŒ–å’Œå›æ”¾åŠŸèƒ½

---

## ğŸ—‚ ä»»åŠ¡åˆ†è§£ä¸æ—¶é—´è§„åˆ’

### ğŸ¯ Phase 1: æ ¸å¿ƒæ¸¸æˆç³»ç»Ÿ (4-6å‘¨)

#### 1.1 æ¸¸æˆè§„åˆ™å¼•æ“ (1-2å‘¨)

**Task 1.1.1: æ£‹å­ç­‰çº§å’Œè§„åˆ™å®šä¹‰**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **æè¿°**: å®šä¹‰æ‰€æœ‰æ£‹å­ç±»å‹å’Œç­‰çº§å…³ç³»
- **äº¤ä»˜ç‰©**:
  - æ£‹å­ç­‰çº§æšä¸¾å’Œå¯¹æˆ˜çŸ©é˜µ
  - ç‰¹æ®Šæ£‹å­é€»è¾‘ï¼ˆåœ°é›·ã€ç‚¸å¼¹ã€å·¥å…µç­‰ï¼‰
  - å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 90%
- **æŠ€æœ¯è¦ç‚¹**:
  ```typescript
  enum PieceRank {
    Commander = 10,    // å¸ä»¤
    General = 9,       // å†›é•¿
    // ... æ›´å¤šç­‰çº§
    Bomb = -1,         // ç‚¸å¼¹
    Mine = -2          // åœ°é›·
  }
  ```

**Task 1.1.2: ç§»åŠ¨è§„åˆ™éªŒè¯**
- **æ—¶é—´ä¼°ç®—**: 4-5å¤©
- **æè¿°**: å®ç°æ£‹å­ç§»åŠ¨åˆæ³•æ€§æ£€æŸ¥
- **äº¤ä»˜ç‰©**:
  - ç§»åŠ¨è§„åˆ™éªŒè¯å™¨
  - é“è·¯å’Œå…¬è·¯ç§»åŠ¨ç®—æ³•
  - è·¯å¾„è®¡ç®—ä¼˜åŒ–
- **å…³é”®ç®—æ³•**:
  - A*è·¯å¾„æœç´¢ç®—æ³•
  - é“è·¯è¿é€šæ€§æ£€æµ‹
  - ç§»åŠ¨è·ç¦»é™åˆ¶éªŒè¯

**Task 1.1.3: èƒœè´Ÿåˆ¤æ–­ç³»ç»Ÿ**
- **æ—¶é—´ä¼°ç®—**: 2-3å¤©
- **æè¿°**: å®ç°æ¸¸æˆç»“æŸæ¡ä»¶æ£€æµ‹
- **äº¤ä»˜ç‰©**:
  - èƒœè´Ÿåˆ¤æ–­é€»è¾‘
  - ç©å®¶æ·˜æ±°æœºåˆ¶
  - ç§¯åˆ†è®¡ç®—ç³»ç»Ÿ

#### 1.2 æ£‹å­ç®¡ç†ç³»ç»Ÿ (1å‘¨)

**Task 1.2.1: æ£‹å­çŠ¶æ€ç®¡ç†**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **æè¿°**: å®ç°æ£‹å­çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **æŠ€æœ¯è¦ç‚¹**:
  - æ˜æ£‹/æš—æ£‹çŠ¶æ€åˆ‡æ¢
  - æ£‹å­å¯è§æ€§è§„åˆ™
  - çŠ¶æ€æŒä¹…åŒ–

**Task 1.2.2: æ£‹å­åˆå§‹å¸ƒå±€**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **æè¿°**: å®ç°æ£‹å­å¸ƒå±€ç³»ç»Ÿ
- **åŠŸèƒ½ç‰¹æ€§**:
  - è‡ªåŠ¨éšæœºå¸ƒå±€
  - ç”¨æˆ·è‡ªå®šä¹‰å¸ƒå±€ç•Œé¢
  - å¸ƒå±€åˆæ³•æ€§éªŒè¯

#### 1.3 æ¸¸æˆçŠ¶æ€ç®¡ç† (1-2å‘¨)

**Task 1.3.1: å…¨å±€çŠ¶æ€è®¾è®¡**
- **æ—¶é—´ä¼°ç®—**: 4-5å¤©
- **æ¶æ„è®¾è®¡**:
  ```typescript
  interface GameState {
    board: BoardState;
    players: Player[];
    currentPlayer: number;
    turnHistory: Move[];
    gamePhase: GamePhase;
  }
  ```

**Task 1.3.2: å›åˆç®¡ç†ç³»ç»Ÿ**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **åŠŸèƒ½å®ç°**:
  - ç©å®¶è½®æ¬¡æ§åˆ¶
  - è¶…æ—¶æœºåˆ¶ï¼ˆ30ç§’/å›åˆï¼‰
  - æš‚åœ/æ¢å¤åŠŸèƒ½

#### 1.4 ç”¨æˆ·äº¤äº’å±‚ (1å‘¨)

**Task 1.4.1: æ£‹å­æ‹–æ‹½ç³»ç»Ÿ**
- **æ—¶é—´ä¼°ç®—**: 4-5å¤©
- **æŠ€æœ¯å®ç°**:
  - HTML5 Drag & Drop API
  - è§¦æ‘¸è®¾å¤‡æ‰‹åŠ¿æ”¯æŒ
  - ç§»åŠ¨é¢„è§ˆå’Œè·¯å¾„æ˜¾ç¤º

**Task 1.4.2: æ¸¸æˆç•Œé¢ä¼˜åŒ–**
- **æ—¶é—´ä¼°ç®—**: 2-3å¤©
- **UIç»„ä»¶**:
  - å½“å‰ç©å®¶æŒ‡ç¤ºå™¨
  - æ¸¸æˆä¿¡æ¯é¢æ¿
  - æ“ä½œç¡®è®¤å¯¹è¯æ¡†

### ğŸ¤– Phase 2: AIå¯¹æ‰‹ç³»ç»Ÿ (3-4å‘¨)

#### 2.1 AIå†³ç­–å¼•æ“ (2-3å‘¨)

**Task 2.1.1: åŸºç¡€AIç®—æ³•å®ç°**
- **æ—¶é—´ä¼°ç®—**: 7-10å¤©
- **ç®—æ³•å®ç°**:
  - Minimaxç®—æ³•æ ¸å¿ƒ
  - Alpha-Betaå‰ªæä¼˜åŒ–
  - å±€é¢è¯„ä¼°å‡½æ•°è®¾è®¡
- **æ€§èƒ½æŒ‡æ ‡**:
  - æœç´¢æ·±åº¦: 4-6å±‚
  - å“åº”æ—¶é—´: < 3ç§’
  - å†…å­˜ä½¿ç”¨: < 100MB

**Task 2.1.2: AIå†³ç­–ä¼˜åŒ–**
- **æ—¶é—´ä¼°ç®—**: 5-7å¤©
- **é«˜çº§åŠŸèƒ½**:
  - å¼€å±€åº“ï¼ˆ100+å¼€å±€æ¨¡å¼ï¼‰
  - æ®‹å±€åº“ï¼ˆ50+æ®‹å±€æ¨¡å¼ï¼‰
  - å¯å‘å¼æœç´¢ä¼˜åŒ–

**Task 2.1.3: AIè¡Œä¸ºæ¨¡å¼**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **AIä¸ªæ€§åŒ–**:
  - æ”»å‡»å‹AIï¼ˆè¿›æ”»æƒé‡ +30%ï¼‰
  - é˜²å®ˆå‹AIï¼ˆé˜²å®ˆæƒé‡ +30%ï¼‰
  - å¹³è¡¡å‹AIï¼ˆå‡è¡¡ç­–ç•¥ï¼‰

#### 2.2 AIéš¾åº¦ç³»ç»Ÿ (1å‘¨)

**Task 2.2.1: å¤šéš¾åº¦ç­‰çº§**
- **æ—¶é—´ä¼°ç®—**: 4-5å¤©
- **éš¾åº¦è®¾è®¡**:
  - ç®€å•: æœç´¢æ·±åº¦2å±‚ï¼Œéšæœºå› å­30%
  - ä¸­ç­‰: æœç´¢æ·±åº¦4å±‚ï¼Œéšæœºå› å­15%
  - å›°éš¾: æœç´¢æ·±åº¦6å±‚ï¼Œéšæœºå› å­5%
  - å¤§å¸ˆ: æœç´¢æ·±åº¦8å±‚ï¼Œéšæœºå› å­2%

**Task 2.2.2: è‡ªé€‚åº”éš¾åº¦**
- **æ—¶é—´ä¼°ç®—**: 2-3å¤©
- **æ™ºèƒ½è°ƒèŠ‚**:
  - èƒœç‡ç»Ÿè®¡å’Œåˆ†æ
  - åŠ¨æ€éš¾åº¦è°ƒæ•´
  - ç©å®¶ä¹ æƒ¯å­¦ä¹ 

### ğŸ® Phase 3: æ¸¸æˆä½“éªŒä¼˜åŒ– (2-3å‘¨)

#### 3.1 åŠ¨ç”»å’Œåé¦ˆ (1-2å‘¨)

**Task 3.1.1: æ£‹å­ç§»åŠ¨åŠ¨ç”»**
- **æ—¶é—´ä¼°ç®—**: 5-7å¤©
- **åŠ¨ç”»æ•ˆæœ**:
  - æµç•…ç§»åŠ¨è¿‡æ¸¡ï¼ˆCSS Transformï¼‰
  - æˆ˜æ–—åŠ¨ç”»ï¼ˆç¢°æ’æ•ˆæœï¼‰
  - ç‰¹æ•ˆç³»ç»Ÿï¼ˆç²’å­æ•ˆæœï¼‰
- **æŠ€æœ¯å®ç°**:
  - Framer MotionåŠ¨ç”»åº“
  - Canvasç²’å­ç³»ç»Ÿ
  - 60fpsæµç•…åŠ¨ç”»

**Task 3.1.2: éŸ³æ•ˆç³»ç»Ÿ**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **éŸ³æ•ˆèµ„æº**:
  - æ£‹å­ç§»åŠ¨éŸ³æ•ˆ
  - æˆ˜æ–—éŸ³æ•ˆ
  - èƒœåˆ©/å¤±è´¥éŸ³æ•ˆ
  - èƒŒæ™¯éŸ³ä¹

**Task 3.1.3: è§†è§‰åé¦ˆä¼˜åŒ–**
- **æ—¶é—´ä¼°ç®—**: 2-3å¤©
- **è§†è§‰å¢å¼º**:
  - å¯ç§»åŠ¨æ£‹å­é«˜äº®
  - ç§»åŠ¨è·¯å¾„é¢„è§ˆ
  - å¨èƒåŒºåŸŸæ˜¾ç¤º

#### 3.2 ç”¨æˆ·ä½“éªŒå¢å¼º (1å‘¨)

**Task 3.2.1: æ“ä½œä¼˜åŒ–**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **åŠŸèƒ½å®ç°**:
  - æ’¤é”€/é‡åšï¼ˆæœ€å¤š10æ­¥ï¼‰
  - å¿«æ·é”®æ”¯æŒ
  - æ‰¹é‡æ“ä½œä¼˜åŒ–

**Task 3.2.2: ä¿¡æ¯æç¤ºç³»ç»Ÿ**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **æç¤ºåŠŸèƒ½**:
  - æ–°æ‰‹æ•™ç¨‹å¼•å¯¼
  - æ“ä½œé”™è¯¯æç¤º
  - æ¸¸æˆæŠ€å·§æç¤º

### ğŸ“Š Phase 4: é«˜çº§åŠŸèƒ½ (2-3å‘¨)

#### 4.1 æ•°æ®æŒä¹…åŒ– (1å‘¨)

**Task 4.1.1: æ¸¸æˆå­˜æ¡£ç³»ç»Ÿ**
- **æ—¶é—´ä¼°ç®—**: 4-5å¤©
- **å­˜æ¡£åŠŸèƒ½**:
  - è‡ªåŠ¨å­˜æ¡£ï¼ˆæ¯5åˆ†é’Ÿï¼‰
  - æ‰‹åŠ¨å­˜æ¡£ï¼ˆ10ä¸ªæ§½ä½ï¼‰
  - å­˜æ¡£å‹ç¼©ï¼ˆå‡å°‘70%å­˜å‚¨ç©ºé—´ï¼‰

**Task 4.1.2: æ¸¸æˆå›æ”¾ç³»ç»Ÿ**
- **æ—¶é—´ä¼°ç®—**: 2-3å¤©
- **å›æ”¾åŠŸèƒ½**:
  - å®Œæ•´å¯¹å±€è®°å½•
  - å›æ”¾æ§åˆ¶ï¼ˆæ’­æ”¾/æš‚åœ/å¿«è¿›ï¼‰
  - å…³é”®æ—¶åˆ»æ ‡è®°

#### 4.2 ç»Ÿè®¡å’Œåˆ†æ (1-2å‘¨)

**Task 4.2.1: æ¸¸æˆç»Ÿè®¡**
- **æ—¶é—´ä¼°ç®—**: 3-4å¤©
- **ç»Ÿè®¡æ•°æ®**:
  - èƒœè´Ÿè®°å½•å’Œèƒœç‡
  - å¹³å‡æ¸¸æˆæ—¶é•¿
  - æ£‹å­ä½¿ç”¨é¢‘ç‡ç»Ÿè®¡

**Task 4.2.2: æ•°æ®åˆ†æ**
- **æ—¶é—´ä¼°ç®—**: 4-5å¤©
- **åˆ†æåŠŸèƒ½**:
  - ç©å®¶è¡Œä¸ºæ¨¡å¼åˆ†æ
  - AIæ€§èƒ½è¯„ä¼°
  - æ¸¸æˆå¹³è¡¡æ€§æŠ¥å‘Š

---

## ğŸ›  æŠ€æœ¯é€‰å‹è¯¦ç»†åˆ†æ

### 1. çŠ¶æ€ç®¡ç†æ–¹æ¡ˆæ¯”è¾ƒ

| æ–¹æ¡ˆ | å­¦ä¹ æˆæœ¬ | æ€§èƒ½ | ç”Ÿæ€ | åŒ…å¤§å° | TypeScript | æ¨èåº¦ |
|------|----------|------|------|--------|------------|--------|
| **Zustand + Immer** | ä½ | é«˜ | ä¸­ | å°(15KB) | ä¼˜ç§€ | â­â­â­â­â­ |
| Redux Toolkit | ä¸­ | ä¸­ | é«˜ | å¤§(45KB) | ä¼˜ç§€ | â­â­â­â­ |
| è‡ªå®šä¹‰çŠ¶æ€æœº | é«˜ | é«˜ | - | æœ€å° | è‡ªå®šä¹‰ | â­â­â­ |

**é€‰æ‹©Zustand + Immerçš„åŸå› **:
```typescript
// ç®€æ´çš„çŠ¶æ€å®šä¹‰
interface GameStore {
  gameState: GameState;
  movePiece: (from: Position, to: Position) => void;
  nextTurn: () => void;
}

// ä¸å¯å˜æ›´æ–°ï¼ˆImmerï¼‰
const useGameStore = create<GameStore>((set) => ({
  gameState: initialState,
  movePiece: (from, to) => set(produce((state) => {
    // ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼ŒImmerå¤„ç†ä¸å¯å˜æ€§
    state.gameState.board[to.x][to.y] = state.gameState.board[from.x][from.y];
    state.gameState.board[from.x][from.y] = null;
  }))
}));
```

### 2. AIç®—æ³•æŠ€æœ¯å¯¹æ¯”

| ç®—æ³• | é€‚ç”¨åœºæ™¯ | è®¡ç®—å¤æ‚åº¦ | å®ç°éš¾åº¦ | æ™ºèƒ½æ°´å¹³ | æ¨èåº¦ |
|------|----------|------------|----------|----------|---------|
| **åˆ†å±‚AIç³»ç»Ÿ** | å…¨åœºæ™¯ | å¯æ§ | ä¸­ç­‰ | é«˜ | â­â­â­â­â­ |
| çº¯Minimax | å®Œå…¨ä¿¡æ¯ | O(b^d) | ä¸­ | ä¸­é«˜ | â­â­â­â­ |
| MCTS | ä¸å®Œå…¨ä¿¡æ¯ | O(n) | é«˜ | é«˜ | â­â­â­ |
| è§„åˆ™AI | å¿«é€ŸåŸå‹ | O(1) | ä½ | ä½ | â­â­â­ |

**æ¨èçš„åˆ†å±‚AIæ¶æ„**:
```typescript
abstract class AIPlayer {
  constructor(protected difficulty: Difficulty) {}
  abstract makeMove(gameState: GameState): Promise<Move>;
}

class SimpleAI extends AIPlayer {
  // è§„åˆ™åŸºç¡€AIï¼Œé€‚åˆç®€å•éš¾åº¦
  async makeMove(gameState: GameState): Promise<Move> {
    return this.selectBestRuleBasedMove(gameState);
  }
}

class AdvancedAI extends AIPlayer {
  // Minimax AIï¼Œé€‚åˆå›°éš¾éš¾åº¦
  async makeMove(gameState: GameState): Promise<Move> {
    return new Promise((resolve) => {
      // ä½¿ç”¨Web Workeré¿å…é˜»å¡UI
      this.worker.postMessage({ gameState, depth: this.getSearchDepth() });
      this.worker.onmessage = (e) => resolve(e.data.bestMove);
    });
  }
}
```

### 3. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### 3.1 Web Workerså®ç°
```typescript
// ai-worker.ts
self.onmessage = function(e) {
  const { gameState, depth } = e.data;
  const bestMove = minimax(gameState, depth);
  self.postMessage({ bestMove });
};

// ä¸»çº¿ç¨‹ä½¿ç”¨
class AIWorkerManager {
  private worker: Worker;
  
  constructor() {
    this.worker = new Worker('/ai-worker.js');
  }
  
  async computeMove(gameState: GameState): Promise<Move> {
    return new Promise((resolve) => {
      this.worker.postMessage({ gameState, depth: 6 });
      this.worker.onmessage = (e) => resolve(e.data.bestMove);
    });
  }
}
```

#### 3.2 ç®—æ³•ä¼˜åŒ–
```typescript
// Alpha-Betaå‰ªæä¼˜åŒ–
function alphabeta(
  node: GameState,
  depth: number,
  alpha: number,
  beta: number,
  maximizer: boolean
): number {
  if (depth === 0 || isTerminal(node)) {
    return evaluate(node);
  }
  
  if (maximizer) {
    let value = -Infinity;
    for (const child of getChildren(node)) {
      value = Math.max(value, alphabeta(child, depth - 1, alpha, beta, false));
      alpha = Math.max(alpha, value);
      if (beta <= alpha) break; // å‰ªæ
    }
    return value;
  }
  // ... minimizeré€»è¾‘
}
```

### 4. æ•°æ®å­˜å‚¨æ–¹æ¡ˆ

#### 4.1 IndexedDB + Dexie.jså®ç°
```typescript
// æ•°æ®åº“è®¾è®¡
class GameDatabase extends Dexie {
  games!: Table<SavedGame>;
  replays!: Table<GameReplay>;
  statistics!: Table<PlayerStats>;

  constructor() {
    super('LudoChessDB');
    this.version(1).stores({
      games: '++id, name, date, gameState',
      replays: '++id, gameId, moves, duration',
      statistics: '++id, playerId, wins, losses, draws'
    });
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const db = new GameDatabase();

// ä¿å­˜æ¸¸æˆ
await db.games.add({
  name: 'å¯¹æˆ˜AI - å›°éš¾',
  date: new Date(),
  gameState: compressGameState(currentGameState)
});

// æŸ¥è¯¢ç»Ÿè®¡
const stats = await db.statistics.where('playerId').equals(playerId).first();
```

---

## ğŸ— æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UI Layer      â”‚    â”‚  Game Engine    â”‚    â”‚   AI System     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ React ç»„ä»¶     â”‚â—„â”€â”€â–ºâ”‚ â€¢ æ¸¸æˆçŠ¶æ€ç®¡ç†   â”‚â—„â”€â”€â–ºâ”‚ â€¢ Minimax AI    â”‚
â”‚ â€¢ ç”¨æˆ·äº¤äº’       â”‚    â”‚ â€¢ è§„åˆ™å¼•æ“       â”‚    â”‚ â€¢ è§„åˆ™ AI       â”‚
â”‚ â€¢ åŠ¨ç”»æ•ˆæœ       â”‚    â”‚ â€¢ ç§»åŠ¨éªŒè¯       â”‚    â”‚ â€¢ Web Workers   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Data Layer                                  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Zustand   â”‚  â”‚ IndexedDB   â”‚  â”‚ LocalStorageâ”‚             â”‚
â”‚  â”‚ (çŠ¶æ€ç®¡ç†)   â”‚  â”‚ (æ¸¸æˆæ•°æ®)   â”‚  â”‚ (è®¾ç½®é…ç½®)   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„è®¾è®¡
```
src/
â”œâ”€â”€ components/                 # Reactç»„ä»¶
â”‚   â”œâ”€â”€ game/                   # æ¸¸æˆç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GameBoard.tsx       # æ¸¸æˆæ£‹ç›˜ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GameControls.tsx    # æ¸¸æˆæ§åˆ¶é¢æ¿
â”‚   â”‚   â”œâ”€â”€ PlayerPanel.tsx     # ç©å®¶ä¿¡æ¯é¢æ¿
â”‚   â”‚   â””â”€â”€ MoveHistory.tsx     # ç§»åŠ¨å†å²
â”‚   â”œâ”€â”€ pieces/                 # æ£‹å­ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Piece.tsx           # æ£‹å­åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PieceSelector.tsx   # æ£‹å­é€‰æ‹©å™¨
â”‚   â”‚   â””â”€â”€ PieceAnimation.tsx  # æ£‹å­åŠ¨ç”»
â”‚   â””â”€â”€ ui/                     # é€šç”¨UIç»„ä»¶
â”‚       â”œâ”€â”€ Modal.tsx           # å¯¹è¯æ¡†ç»„ä»¶
â”‚       â”œâ”€â”€ Button.tsx          # æŒ‰é’®ç»„ä»¶
â”‚       â””â”€â”€ LoadingSpinner.tsx  # åŠ è½½æŒ‡ç¤ºå™¨
â”œâ”€â”€ game/                       # æ¸¸æˆæ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒæ¸¸æˆå¼•æ“
â”‚   â”‚   â”œâ”€â”€ GameEngine.ts       # ä¸»æ¸¸æˆå¼•æ“
â”‚   â”‚   â”œâ”€â”€ GameRules.ts        # æ¸¸æˆè§„åˆ™å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ GameState.ts        # æ¸¸æˆçŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ MoveValidator.ts    # ç§»åŠ¨éªŒè¯å™¨
â”‚   â”œâ”€â”€ ai/                     # AIç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ AIPlayer.ts         # AIç©å®¶åŸºç±»
â”‚   â”‚   â”œâ”€â”€ SimpleAI.ts         # ç®€å•AIå®ç°
â”‚   â”‚   â”œâ”€â”€ MinimaxAI.ts        # Minimax AIå®ç°
â”‚   â”‚   â”œâ”€â”€ AIWorker.ts         # Web WorkeråŒ…è£…
â”‚   â”‚   â””â”€â”€ Evaluator.ts        # å±€é¢è¯„ä¼°å™¨
â”‚   â”œâ”€â”€ pieces/                 # æ£‹å­ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ Piece.ts            # æ£‹å­åŸºç±»
â”‚   â”‚   â”œâ”€â”€ PieceFactory.ts     # æ£‹å­å·¥å‚
â”‚   â”‚   â”œâ”€â”€ PieceManager.ts     # æ£‹å­ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ PieceTypes.ts       # æ£‹å­ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/                  # æ¸¸æˆå·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ BoardUtils.ts       # æ£‹ç›˜å·¥å…·
â”‚       â”œâ”€â”€ PathFinder.ts       # è·¯å¾„æœç´¢
â”‚       â””â”€â”€ GameUtils.ts        # é€šç”¨æ¸¸æˆå·¥å…·
â”œâ”€â”€ store/                      # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ gameStore.ts            # æ¸¸æˆçŠ¶æ€Store
â”‚   â”œâ”€â”€ aiStore.ts              # AIè®¾ç½®Store
â”‚   â”œâ”€â”€ uiStore.ts              # UIçŠ¶æ€Store
â”‚   â””â”€â”€ persistStore.ts         # æŒä¹…åŒ–Store
â”œâ”€â”€ services/                   # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ GameService.ts          # æ¸¸æˆæœåŠ¡
â”‚   â”œâ”€â”€ SaveGameService.ts      # å­˜æ¡£æœåŠ¡
â”‚   â”œâ”€â”€ ReplayService.ts        # å›æ”¾æœåŠ¡
â”‚   â”œâ”€â”€ StatisticsService.ts    # ç»Ÿè®¡æœåŠ¡
â”‚   â””â”€â”€ SoundService.ts         # éŸ³æ•ˆæœåŠ¡
â”œâ”€â”€ hooks/                      # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ useGame.ts              # æ¸¸æˆHook
â”‚   â”œâ”€â”€ useAI.ts                # AI Hook
â”‚   â”œâ”€â”€ useAnimation.ts         # åŠ¨ç”»Hook
â”‚   â””â”€â”€ usePersistence.ts       # æŒä¹…åŒ–Hook
â”œâ”€â”€ types/                      # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ game.ts                 # æ¸¸æˆç±»å‹
â”‚   â”œâ”€â”€ ai.ts                   # AIç±»å‹
â”‚   â”œâ”€â”€ pieces.ts               # æ£‹å­ç±»å‹
â”‚   â””â”€â”€ ui.ts                   # UIç±»å‹
â”œâ”€â”€ workers/                    # Web Workers
â”‚   â”œâ”€â”€ ai-worker.ts            # AIè®¡ç®—Worker
â”‚   â””â”€â”€ compression-worker.ts   # æ•°æ®å‹ç¼©Worker
â”œâ”€â”€ assets/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ sounds/                 # éŸ³æ•ˆæ–‡ä»¶
â”‚   â”œâ”€â”€ images/                 # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ fonts/                  # å­—ä½“æ–‡ä»¶
â””â”€â”€ utils/                      # é€šç”¨å·¥å…·
    â”œâ”€â”€ constants.ts            # å¸¸é‡å®šä¹‰
    â”œâ”€â”€ helpers.ts              # è¾…åŠ©å‡½æ•°
    â””â”€â”€ validators.ts           # éªŒè¯å‡½æ•°
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡ä¸æµ‹è¯•è®¡åˆ’

### æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡é¡¹ | ç›®æ ‡å€¼ | æµ‹è¯•æ–¹æ³• | éªŒæ”¶æ ‡å‡† |
|--------|--------|----------|----------|
| **é¦–æ¬¡åŠ è½½æ—¶é—´** | < 3ç§’ | Lighthouseæµ‹è¯• | âœ… é€šè¿‡ |
| **AIå“åº”æ—¶é—´** | < 5ç§’ | è‡ªåŠ¨åŒ–æµ‹è¯• | å›°éš¾éš¾åº¦ < 5ç§’ |
| **åŠ¨ç”»æµç•…åº¦** | 60fps | DevToolsæ€§èƒ½é¢æ¿ | æ— æ˜æ˜¾æ‰å¸§ |
| **å†…å­˜ä½¿ç”¨** | < 150MB | å‹åŠ›æµ‹è¯• | è¿ç»­æ¸¸æˆ3å°æ—¶ |
| **å­˜æ¡£å¤§å°** | < 100KB | æ•°æ®åˆ†æ | å•å±€æ¸¸æˆå­˜æ¡£ |

### æµ‹è¯•ç­–ç•¥

#### å•å…ƒæµ‹è¯• (ç›®æ ‡è¦†ç›–ç‡: 85%)
- **æ¸¸æˆè§„åˆ™æµ‹è¯•**: æ‰€æœ‰ç§»åŠ¨è§„åˆ™ã€å¯¹æˆ˜é€»è¾‘
- **AIç®—æ³•æµ‹è¯•**: Minimaxç®—æ³•æ­£ç¡®æ€§ã€æ€§èƒ½æµ‹è¯•
- **å·¥å…·å‡½æ•°æµ‹è¯•**: è·¯å¾„æŸ¥æ‰¾ã€åæ ‡è½¬æ¢ç­‰

#### é›†æˆæµ‹è¯• (ç›®æ ‡è¦†ç›–ç‡: 80%)
- **æ¸¸æˆæµç¨‹æµ‹è¯•**: å®Œæ•´å¯¹å±€æµç¨‹
- **AIå¯¹æˆ˜æµ‹è¯•**: ä¸åŒéš¾åº¦AIäº’ç›¸å¯¹æˆ˜
- **æ•°æ®æŒä¹…åŒ–æµ‹è¯•**: å­˜æ¡£/è¯»æ¡£åŠŸèƒ½

#### æ€§èƒ½æµ‹è¯•
- **å‹åŠ›æµ‹è¯•**: é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§
- **å†…å­˜æ³„æ¼æµ‹è¯•**: å¤šå±€æ¸¸æˆå†…å­˜ä½¿ç”¨
- **ç®—æ³•æ€§èƒ½æµ‹è¯•**: AIè®¡ç®—æ—¶é—´åˆ†æ

#### ç”¨æˆ·ä½“éªŒæµ‹è¯•
- **å¯ç”¨æ€§æµ‹è¯•**: ç”¨æˆ·æ“ä½œæµç¨‹
- **æ— éšœç¢æµ‹è¯•**: é”®ç›˜å¯¼èˆªã€å±å¹•é˜…è¯»å™¨
- **è®¾å¤‡å…¼å®¹æ€§**: ä¸åŒå±å¹•å°ºå¯¸ã€æ€§èƒ½è®¾å¤‡

---

## ğŸš€ å¼€å‘é‡Œç¨‹ç¢‘

### Milestone 1: MVPç‰ˆæœ¬ (6å‘¨å)
**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… åŸºç¡€æ¸¸æˆè§„åˆ™å®Œæ•´å®ç°
- âœ… 3ä¸ªéš¾åº¦ç­‰çº§çš„AIå¯¹æ‰‹
- âœ… å®Œæ•´çš„ç”¨æˆ·äº¤äº’ç³»ç»Ÿ
- âœ… åŸºç¡€UIå’ŒåŠ¨ç”»æ•ˆæœ

**éªŒæ”¶æ ‡å‡†**:
- å¯ä»¥è¿›è¡Œå®Œæ•´çš„1v3å¯¹æˆ˜
- AIå“åº”æ—¶é—´ < 10ç§’
- åŸºç¡€åŠŸèƒ½æ— é‡å¤§Bug

### Milestone 2: å¢å¼ºç‰ˆæœ¬ (10å‘¨å)
**æ–°å¢åŠŸèƒ½**:
- âœ… é«˜çº§AIç®—æ³•(Minimax)
- âœ… Web Workersæ€§èƒ½ä¼˜åŒ–
- âœ… æ¸¸æˆå­˜æ¡£/è¯»æ¡£åŠŸèƒ½
- âœ… å®Œæ•´çš„åŠ¨ç”»å’ŒéŸ³æ•ˆç³»ç»Ÿ

**éªŒæ”¶æ ‡å‡†**:
- AIå“åº”æ—¶é—´ä¼˜åŒ–åˆ° < 5ç§’
- åŠ¨ç”»æµç•…åº¦è¾¾åˆ°60fps
- å­˜æ¡£åŠŸèƒ½ç¨³å®šå¯é 

### Milestone 3: å®Œæ•´ç‰ˆæœ¬ (14å‘¨å)
**æœ€ç»ˆåŠŸèƒ½**:
- âœ… æ¸¸æˆå›æ”¾ç³»ç»Ÿ
- âœ… è¯¦ç»†çš„ç»Ÿè®¡åˆ†æ
- âœ… ç”¨æˆ·ä½“éªŒå…¨é¢ä¼˜åŒ–
- âœ… æ€§èƒ½è°ƒä¼˜å’ŒBugä¿®å¤

**éªŒæ”¶æ ‡å‡†**:
- æ‰€æœ‰æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- ç”¨æˆ·ä½“éªŒæµ‹è¯•é€šè¿‡
- ä»£ç æµ‹è¯•è¦†ç›–ç‡ > 80%

---

## ğŸ”§ æŠ€æœ¯å€ºåŠ¡å’Œé£é™©ç®¡ç†

### å·²çŸ¥æŠ€æœ¯å€ºåŠ¡
1. **ç°æœ‰Canvasæ¶æ„**: éœ€è¦ä¸æ–°çš„æ¸¸æˆé€»è¾‘é›†æˆ
2. **çŠ¶æ€ç®¡ç†è¿ç§»**: ä»ç°æœ‰é…ç½®ç³»ç»Ÿè¿ç§»åˆ°Zustand
3. **ç±»å‹å®šä¹‰å®Œå–„**: è¡¥å……å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰

### ä¸»è¦é£é™©ç‚¹
1. **AIæ€§èƒ½é£é™©**: å¤æ‚ç®—æ³•å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜
   - **ç¼“è§£æªæ–½**: ä½¿ç”¨Web Workersã€ç®—æ³•ä¼˜åŒ–ã€æ¸è¿›å¼åŠ è½½
2. **ç”¨æˆ·ä½“éªŒé£é™©**: æ¸¸æˆå“åº”å»¶è¿Ÿå½±å“ä½“éªŒ
   - **ç¼“è§£æªæ–½**: å¼‚æ­¥å¤„ç†ã€è¿›åº¦æŒ‡ç¤ºã€å“åº”å¼åé¦ˆ
3. **å…¼å®¹æ€§é£é™©**: ä¸åŒè®¾å¤‡å’Œæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜
   - **ç¼“è§£æªæ–½**: æ¸è¿›å¼å¢å¼ºã€Polyfillã€å……åˆ†æµ‹è¯•

### æŠ€æœ¯é€‰å‹é£é™©è¯„ä¼°
| æŠ€æœ¯æ ˆ | é£é™©ç­‰çº§ | é£é™©æè¿° | ç¼“è§£æªæ–½ |
|--------|----------|----------|----------|
| Zustand | ä½ | ç›¸å¯¹è¾ƒæ–°çš„åº“ | æœ‰Reactå›¢é˜Ÿæ¨èï¼Œç¤¾åŒºæ´»è·ƒ |
| Web Workers | ä¸­ | æµè§ˆå™¨å…¼å®¹æ€§ | æä¾›é™çº§æ–¹æ¡ˆï¼Œä¸»è¦æµè§ˆå™¨æ”¯æŒè‰¯å¥½ |
| IndexedDB | ä¸­ | APIå¤æ‚æ€§ | ä½¿ç”¨Dexie.jsç®€åŒ–ï¼Œæä¾›LocalStorageé™çº§ |
| Minimaxç®—æ³• | é«˜ | è®¡ç®—å¤æ‚åº¦ | æ¸è¿›å¼å®ç°ï¼Œæ€§èƒ½ç›‘æ§ï¼Œè¶…æ—¶ä¿æŠ¤ |

---

## ğŸ“ˆ æœªæ¥å‘å±•è·¯çº¿å›¾

### Phase 5: ç½‘ç»œå¯¹æˆ˜åŠŸèƒ½ (æœªæ¥ç‰ˆæœ¬)
- WebRTCç‚¹å¯¹ç‚¹è¿æ¥
- æˆ¿é—´åŒ¹é…ç³»ç»Ÿ
- å®æ—¶åŒæ­¥æœºåˆ¶
- æ–­çº¿é‡è¿åŠŸèƒ½

### Phase 6: ç§»åŠ¨ç«¯é€‚é… (æœªæ¥ç‰ˆæœ¬)
- PWAæ”¯æŒ
- è§¦æ‘¸æ“ä½œä¼˜åŒ–
- å“åº”å¼å¸ƒå±€å¢å¼º
- åŸç”Ÿåº”ç”¨æ‰“åŒ…

### Phase 7: é«˜çº§AIåŠŸèƒ½ (æœªæ¥ç‰ˆæœ¬)
- æœºå™¨å­¦ä¹ AI
- æ£‹è°±å­¦ä¹ ç³»ç»Ÿ
- ä¸ªæ€§åŒ–AIå¯¹æ‰‹
- äº‘ç«¯AIæœåŠ¡

### Phase 8: ç¤¾åŒºåŠŸèƒ½ (æœªæ¥ç‰ˆæœ¬)
- ç”¨æˆ·ç³»ç»Ÿ
- æ’è¡Œæ¦œ
- æˆå°±ç³»ç»Ÿ
- ç¤¾äº¤åˆ†äº«

---

## ğŸ“ æ€»ç»“

æœ¬æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ä¸ºå››å›½å†›æ£‹é¡¹ç›®æä¾›äº†å®Œæ•´çš„å¯¹æˆ˜åŠŸèƒ½å®ç°è·¯å¾„ï¼ŒåŒ…æ‹¬ï¼š

### æ ¸å¿ƒä¼˜åŠ¿
- **æŠ€æœ¯æ ˆç°ä»£åŒ–**: ä½¿ç”¨æœ€æ–°çš„å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¶æ„å¯æ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºåç»­åŠŸèƒ½æ‰©å±•
- **æ€§èƒ½ä¼˜åŒ–**: Web Workers + ç®—æ³•ä¼˜åŒ–ä¿è¯æµç•…ä½“éªŒ
- **ç”¨æˆ·ä½“éªŒ**: ä¸°å¯Œçš„äº¤äº’å’Œè§†è§‰åé¦ˆ

### å®æ–½å»ºè®®
1. **æŒ‰é˜¶æ®µå®æ–½**: ä¸¥æ ¼æŒ‰ç…§4ä¸ªPhaseé€æ­¥å¼€å‘
2. **æŒç»­æµ‹è¯•**: æ¯ä¸ªé˜¶æ®µéƒ½è¦è¿›è¡Œå……åˆ†çš„æµ‹è¯•
3. **æ€§èƒ½ç›‘æ§**: å»ºç«‹æ€§èƒ½ç›‘æ§ä½“ç³»ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
4. **ç”¨æˆ·åé¦ˆ**: åœ¨MVPé˜¶æ®µå°±å¼€å§‹æ”¶é›†ç”¨æˆ·åé¦ˆ

### æˆåŠŸå…³é”®å› ç´ 
- **å›¢é˜ŸæŠ€èƒ½**: ç¡®ä¿å›¢é˜Ÿå…·å¤‡ç›¸å…³æŠ€æœ¯èƒ½åŠ›
- **æ—¶é—´è§„åˆ’**: åˆç†å®‰æ’å¼€å‘æ—¶é—´ï¼Œç•™å‡ºæµ‹è¯•å’Œä¼˜åŒ–æ—¶é—´
- **è´¨é‡æ§åˆ¶**: å»ºç«‹å®Œå–„çš„ä»£ç å®¡æŸ¥å’Œæµ‹è¯•æµç¨‹
- **ç”¨æˆ·å¯¼å‘**: å§‹ç»ˆä»¥ç”¨æˆ·ä½“éªŒä¸ºä¸­å¿ƒè¿›è¡Œè®¾è®¡å’Œå¼€å‘

è¿™ä¸ªæ–¹æ¡ˆæ—¢ä¿è¯äº†æŠ€æœ¯çš„å…ˆè¿›æ€§ï¼Œåˆè€ƒè™‘äº†å®ç°çš„å¯è¡Œæ€§ï¼Œæ˜¯ä¸€ä¸ªå¹³è¡¡ä¸”å¯æ‰§è¡Œçš„æŠ€æœ¯è·¯çº¿å›¾ã€‚

---

*æ–‡æ¡£ç‰ˆæœ¬*: v1.0  
*åˆ›å»ºæ—¥æœŸ*: 2025-08-18  
*æœ€åæ›´æ–°*: 2025-08-18  
*ç»´æŠ¤è€…*: å¼€å‘å›¢é˜Ÿ